source:
  file: apiargs-MongoDBCollection-method-find-option.yaml
  ref: projection
operation: findOneAndUpdate
position: 1
---
source:
  file: apiargs-MongoDBCollection-method-find-option.yaml
  ref: sort
operation: findOneAndUpdate
position: 2
---
source:
  file: apiargs-MongoDBClient-method-listDatabases-option.yaml
  ref: maxTimeMS
operation: findOneAndUpdate
position: 3
---
source:
  file: apiargs-MongoDBCollection-method-aggregate-option.yaml
  ref: bypassDocumentValidation
operation: findOneAndUpdate
position: 4
---
arg_name: option
name: returnDocument
type: string
description: |
  Specifies whether to return the document before the {{event}}, or
  after. ``returnDocument`` supports the following values:
  
  - ``MongoDB\Operation\FindOneAndReplace::RETURN_DOCUMENT_BEFORE`` (*default*)
  - ``MongoDB\Operation\FindOneAndReplace::RETURN_DOCUMENT_AFTER``
optional: true
replacement:
  event: "update is applied"
interface: phpmethod
operation: findOneAndUpdate
position: 5
---
arg_name: option
name: upsert
type: boolean
description: |
  When true, {{role}} creates a new document if no document
  matches the query. If a document matches the query, {{role}}
  performs an update. To avoid multiple upserts, ensure that the query
  fields are uniquely indexed.

  The default is ``false``.
optional: true
interface: phpmethod
operation: findOneAndUpdate
position: 6
---
source:
  file: apiargs-common-option.yaml
  ref: writeConcern
operation: findOneAndUpdate
position: 7
...